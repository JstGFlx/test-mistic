(()=>{"use strict";var e=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],t=["01","02","03","04","05","06","07","08","09","10","11","12"],n=["2002","2001","2000","1999","1998","1997","1996","1995","1994","1993","1992","1991","1990","1989","1988","1987","1986","1985","1984","1983","1982","1981","1980","1979","1978","1977","1976","1975","1974","1973","1972","1971","1970","1969","1968","1967","1966","1965","1964","1963","1962","1961","1960","1959","1958","1957","1956","1955","1954","1953","1952","1951","1950","1949","1948","1947","1946","1945","1944","1943","1942","1941","1940","1939","1938","1937","1936","1935","1934","1933","1932","1931","1930","1929","1928","1927","1926","1925","1924","1923","1922","1921","1920","1919","1918","1917","1916","1915","1914","1913","1912","1911","1910","1909","1908","1907","1906","1905","1904","1903","1902","1901","1900"],r=document.querySelector(".predictions"),c=r.querySelectorAll(".btn"),o=document.querySelector("#predict-2"),l=document.querySelector("#predict-3"),i=document.querySelector("#predict-4"),a=document.querySelector("#predict-5"),s=document.querySelector("#loading"),u=document.querySelector("#record"),d=document.querySelector("#final");function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"appendItem",value:function(e){this._container.append(e)}}])&&f(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._select=t}var t,n;return t=e,(n=[{key:"_showError",value:function(e){e.classList.add("select_not-filling")}},{key:"_hideError",value:function(e){e.classList.remove("select_not-filling")}},{key:"checkInvalidSelect",value:function(){return isNaN(Number(this._select.textContent))}},{key:"setSelectValidStatus",value:function(){this.checkInvalidSelect()?this._showError(this._select):this._hideError(this._select)}}])&&v(t.prototype,n),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r,c){var o=c.handleItemClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._templateItem=t,this._textItem=n,this._hederSelector=r,this._elementItem=this._getTemplate(),this._handleItemClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return this._templateItem.content.querySelector(".select__item").cloneNode(!0)}},{key:"generateItem",value:function(){return this._elementItem.textContent=this._textItem,this._setEventListeners(),this._elementItem}},{key:"_setEventListeners",value:function(){var e=this;this._elementItem.addEventListener("click",(function(){e._hederSelector.textContent=e._textItem,e._handleItemClick()}))}}])&&_(t.prototype,n),e}(),y=function(){var e=u.content.querySelector(".record").cloneNode(!0),t=e.querySelector(".record__progress"),n=e.querySelector(".record__value");r.firstElementChild.remove(),r.append(e);var c=setInterval((function(){t.value++,n.textContent="".concat(t.value,"%"),t.value===t.max&&(clearInterval(c),function(){var e=d.content.querySelector(".final").cloneNode(!0),t=e.querySelector(".btn"),n=e.querySelector("#alert");r.firstElementChild.remove(),r.append(e);var c=function(e,t){n.textContent=t?"Вы можете встретить: ".concat(e.name,", ростом: ").concat(e.height,". Вам надо быть готовым, чтобы последствия не оказались\n      необратимыми."):"Что то пошло не так ".concat(e,", Нажмите еще раз на кнопку")};t.addEventListener("click",(function(){fetch("https://swapi.dev/api/people/".concat(Math.floor(88*Math.random())+1,"/")).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){c(e,!0)})).catch((function(e){c(e,!1)}))}))}())}),35)},S=function(e){var t=s.content.querySelector(".loading").cloneNode(!0);r.firstElementChild.remove(),r.append(t),setTimeout((function(){r.firstElementChild.remove(),function(e){var t=i.content.querySelector(".prediction").cloneNode(!0);r.append(t),r.querySelectorAll(".btn").forEach((function(t){t.addEventListener("click",(function(){!function(e){var t=a.content.querySelector(".prediction").cloneNode(!0),n=t.querySelector(".prediction__text"),c=t.querySelectorAll(".btn");r.firstElementChild.remove(),r.append(t);var o,l,i,s,u,d=(o=e,l=new Date,i=new Date(o),s=l.getFullYear()-i.getFullYear(),((u=l.getMonth()-i.getMonth())<0||0===u&&l.getDate()<i.getDate())&&s--,s);n.textContent=d>18&&d<36?"По вам скучает очень близкий человек, которого больше нет в мире живых.":d>35&&d<46?"По вам скучает очень близкий человек, которого больше нет в мире живых. Возможно это дедушка или бабушка.":"По вам скучает очень близкий человек, которого больше нет в мире живых. Возможно это кто-то из Ваших родителей.",c.forEach((function(e){e.addEventListener("click",y)}))}(e)}))}))}(e)}),2e3)},q=function(){var c=l.content.querySelector(".prediction").cloneNode(!0);r.firstElementChild.remove(),r.append(c);var o=document.querySelector("#day"),i=o.querySelector(".select__header"),a=o.querySelector(".select__container"),s=document.querySelector("#month"),u=s.querySelector(".select__header"),d=s.querySelector(".select__container"),f=document.querySelector("#year"),v=f.querySelector(".select__header"),_=f.querySelector(".select__container"),y=document.querySelector(".template_item"),q=r.querySelector(".btn"),k=new m({renderer:function(e){var t=new p(y,e,i,{handleItemClick:function(){b(),L.setSelectValidStatus()}});k.appendItem(t.generateItem())}},"#body_days"),I=new m({renderer:function(e){var t=new p(y,e,u,{handleItemClick:function(){b(),g.setSelectValidStatus()}});I.appendItem(t.generateItem())}},"#body_month"),E=new m({renderer:function(e){var t=new p(y,e,v,{handleItemClick:function(){b(),w.setSelectValidStatus()}});E.appendItem(t.generateItem())}},"#body_year"),b=function(){a.classList.remove("select_opened"),i.classList.remove("select__header_opened"),u.classList.remove("select__header_opened"),d.classList.remove("select_opened"),v.classList.remove("select__header_opened"),_.classList.remove("select_opened")},C=function(e,t){e.classList.contains("select_opened")?(e.classList.remove("select_opened"),t.classList.remove("select__header_opened")):(b(),e.classList.add("select_opened"),t.classList.add("select__header_opened"))},L=new h(i),g=new h(u),w=new h(v);E.renderItems(n),I.renderItems(t),k.renderItems(e),i.addEventListener("click",(function(){C(a,i)})),u.addEventListener("click",(function(){C(d,u)})),v.addEventListener("click",(function(){C(_,v)})),q.addEventListener("click",(function(){if(L.setSelectValidStatus(),g.setSelectValidStatus(),w.setSelectValidStatus(),!(L.checkInvalidSelect()||g.checkInvalidSelect()||w.checkInvalidSelect())){var e="".concat(v.textContent,"/").concat(u.textContent,"/").concat(i.textContent);S(e)}}))},k=function(){var e=o.content.querySelector(".prediction").cloneNode(!0);r.firstElementChild.remove(),r.append(e),r.querySelectorAll(".btn").forEach((function(e){return e.addEventListener("click",q)}))};c.forEach((function(e){return e.addEventListener("click",k)}))})();